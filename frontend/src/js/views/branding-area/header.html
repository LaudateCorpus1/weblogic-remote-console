<!--
Copyright (c) 2020, 2021, Oracle and/or its affiliates.
 The Universal Permissive License (UPL), Version 1.0
-->
<div id="header-container">

  <div style="display: none;">
    <!--
      When the CBE goes down there is no Helidon server to serve up images, so
      we need to stash images here. Doing that allows us to have the images in
      memory, and be able to use them with a <canvas> element to set the image
      for the connectivity indicator.
    -->
    <img id="online-icon" data-bind="attr: {src: '../../images/' + i18n.header.icons.connectivity.online.iconFile + '.png', title: i18n.header.icons.connectivity.online.tooltip}"/>
    <img id="offline-icon" data-bind="attr: {src: '../../images/' + i18n.header.icons.connectivity.offline.iconFile + '.png', title: i18n.header.icons.connectivity.offline.tooltip}"/>
    <img id="detached-icon" data-bind="attr: {src: '../../images/' + i18n.header.icons.connectivity.detached.iconFile + '.png', title: i18n.header.icons.connectivity.detached.tooltip}"/>
  </div>

  <div class="oj-flex-bar">
    <div id="navtreeToggle" class="oj-flex-bar-start">

      <oj-module config="[[navtreeTogglerModuleConfig]]">
      </oj-module>
    </div>

    <div id="header-title" class="oj-sm-align-self-flex-start">
      <a href="/">
        <span id="app-name" :class="[[appInfoTitleClass]]">
          <oj-bind-text value="[[appName]]"></oj-bind-text>
          <span id="app-version" :class="[[appInfoTitleClass]]">
            <oj-bind-text value="[[i18n.header.app.version.value]]"></oj-bind-text>
          </span>
        </span>
      </a>
    </div>

    <div id="domain-connect-info" class="oj-flex-bar-end">

      <oj-bind-if test="[[i18n.header.keyPairs.welcome.value() !== '']]">
        <span id="welcome-label" data-bind="text: i18n.header.keyPairs.welcome.label"></span>
        <span id="welcome-variable" data-bind="text: i18n.header.keyPairs.welcome.value()"></span>

        <img data-bind="attr: {src: '../../images/' + i18n.header.icons.separator.iconFile + '.png'}"/>

        <img id="connection-type-image" data-bind="attr: {src: '../../images/' + i18n.header.keyPairs.connectionType.iconFile() + '.png', 'title': i18n.header.keyPairs.connectionType.tooltip()}"/>
        <span id="connected-to-label" data-bind="text: i18n.header.keyPairs.connectedTo.label"></span>

        <div id="domain-menu-dropdown" style="margin-top: 8px;">
          <a id="domainMenuLauncher" href="#" tabindex="-1"
             on-click="[[launchDomainMenu]]"
          >
            <span id="connected-to-variable" data-bind="text: i18n.header.keyPairs.connectedTo.value()"></span>
          </a>
        </div>

        <oj-menu
          id="domainMenu"
          aria-labelledby="domainMenuLauncher"
          open-options.launcher="domainMenuLauncher"
        >
          <oj-option :id="[[i18n.header.menus.domain.version.id]]" value="[[i18n.header.menus.domain.url.id]]">
            <span><b><oj-bind-text value="[[i18n.header.menus.domain.url.label]]"></oj-bind-text></b>
              <span><oj-bind-text value="[[i18n.header.menus.domain.url.value()]]"></oj-bind-text></span>
            </span>
          </oj-option>
          <oj-option :id="[[i18n.header.menus.domain.version.id]]" value="[[i18n.header.menus.domain.version.id]]">
            <span><b><oj-bind-text value="[[i18n.header.menus.domain.version.label]]"></oj-bind-text></b>
              <span><oj-bind-text value="[[i18n.header.menus.domain.version.value()]]"></oj-bind-text></span>
            </span>
          </oj-option>
        </oj-menu>

        <img data-bind="attr: {src: '../../images/' + i18n.header.icons.separator.iconFile + '.png'}"/>

        <oj-button
          id="disconnect"
          on-oj-action="[[domainConnectButtonClickHandler]]"
          chroming="borderless"
          disabled="[[i18n.header.buttons.disconnect.disabled]]"
        >
          <img id="connect-disconnect-image" slot="startIcon" data-bind="attr: {src: '../../images/' + i18n.header.buttons.disconnect.image + '.png', 'title': i18n.header.buttons.disconnect.label}"/>
        </oj-button>

        <canvas id="console-state-bar" width="12" height="24" data-bind="attr: {title: i18n.header.icons.connectivity.online.tooltip}"></canvas>
      </oj-bind-if>

      <oj-bind-if test="[[i18n.header.keyPairs.welcome.value() === '']]">
        <span id="not-connected-label" data-bind="text: i18n.header.keyPairs.notConnected.label"></span>

        <img data-bind="attr: {src: '../../images/' + i18n.header.icons.separator.iconFile + '.png'}"/>

        <oj-button
          id="connect"
          on-oj-action="[[domainConnectButtonClickHandler]]"
          chroming="borderless"
          disabled="[[i18n.header.buttons.connect.disabled]]"
        >
          <img id="connect-disconnect-image" slot="startIcon" data-bind="attr: {src: '../../images/' + i18n.header.buttons.connect.image + '.png', 'title': i18n.header.buttons.connect.label}"/>
        </oj-button>

        <canvas id="console-state-bar" width="12" height="24" title=""></canvas>
      </oj-bind-if>

      <oj-module config="[[domainConnectionModuleConfig]]"></oj-module>
    </div>
  </div>

</div>

<!--
 Copyright (c) 2020, 2021, Oracle and/or its affiliates.
 The Universal Permissive License (UPL), Version 1.0
-->
<div class="cfe-table-form-container">

  <oj-dialog id="confirmDialog" dialog-title="[[i18n.confirmDialog.title]]" initial-visibility="hide" cancel-behavior="icon">
    <div>
      <span id="confirmDialogPrompt"></span>
    </div>

    <div slot="footer">
      <oj-button :id="[[i18n.confirmDialog.buttons.yes.id]]">
        <span class="button-label" data-bind="text: [[i18n.confirmDialog.buttons.yes.label]]"></span>
      </oj-button>
      <oj-button :id="[[i18n.confirmDialog.buttons.no.id]]">
        <span class="button-label" data-bind="text: [[i18n.confirmDialog.buttons.no.label]]"></span>
      </oj-button>
    </div>
  </oj-dialog>

  <oj-dialog id="syncIntervalDialog" dialog-title="[[i18n.dialogSync.title]]" cancel-behavior="icon">
    <div slot="body">
      <span data-bind="text: [[i18n.dialogSync.instructions]]"></span>
      <oj-form-layout label-edge="start" label-width="72%">
        <oj-label slot="label" for="interval-field"><span data-bind="text: [[i18n.dialogSync.fields.interval.label]]"></span>
        </oj-label>
        <oj-input-text id="interval-field" value='{{i18n.dialogSync.fields.interval.value}}'></oj-input-text>
      </oj-form-layout>
    </div>

    <div slot="footer">
      <oj-button :id="[[i18n.dialogSync.buttons.ok.id]]">
        <span class="button-label" data-bind="text: [[i18n.dialogSync.buttons.ok.label]]"></span>
      </oj-button>
      <oj-button :id="[[i18n.dialogSync.buttons.cancel.id]]">
        <span class="button-label" data-bind="text: [[i18n.dialogSync.buttons.cancel.label]]"></span>
      </oj-button>
    </div>
  </oj-dialog>

  <div class="cfe-table-form-content-header oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap">

    <oj-module config="[[formToolbarModuleConfig]]">
    </oj-module>

    <div class="cfe-form-tabstrip">
      <oj-bind-for-each data="[[tabDataProviders]]">
        <template>
          <div class="oj-flex-item oj-sm-12 tabbar-container oj-sm-padding-2x-horizontal">
            <oj-conveyor-belt content-parent="#tab1">
              <oj-tab-bar id="tab1" edge="top" layout="condense" selection="{{$current.data.selection}}" on-selection-changed="[[selectionChanged.bind($current.data)]]" data="[[$current.data.dataProvider]]">
                <template slot="itemTemplate" data-oj-as="item">
                  <li>
                    <a href="#">
                      <oj-bind-text value="[[item.data.label]]"></oj-bind-text>
                    </a>
                  </li>
                </template>
              </oj-tab-bar>
            </oj-conveyor-belt>
          </div>
        </template>
      </oj-bind-for-each>

    </div>

    <div id="formMessages">
      <oj-messages messages="[[messagesDataprovider]]">
      </oj-messages>
    </div>

    <div id="intro" class="cfe-table-form-instructions">
      <oj-bind-dom config="[[introductionHTML]]" />
    </div>

    <!-- Position "show-advanced-fields" checkboxset on the right side -->
    <div id="show-advanced-fields-container" class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-flex-end oj-flex-items-pad">
      <oj-bind-if test="[[hasAdvancedFields()]]">
        <div id="show-advanced-fields-checkboxset" class="oj-flex-item">
          <oj-checkboxset value="{{showAdvancedFields}}" on-value-changed="[[showAdvancedFieldsValueChanged]]">
            <oj-option id="show-advanced-fields" value="[[i18n.checkboxes.showAdvancedFields.id]]">
              <span><oj-bind-text value="[[i18n.checkboxes.showAdvancedFields.label]]"></oj-bind-text></span>
            </oj-option>
          </oj-checkboxset>
        </div>
      </oj-bind-if>
    </div>

    <div id="form-container" class="cfe-table-form-content" data-oj-binding-provider="none">
      <!--
        FortifyIssueSuppression Often Misused: File Upload
      -->
      <input class="cfe-file-chooser" id="file-chooser" type="file"/>

      <oj-bind-if test="[[!showHelp()]]">
        <oj-bind-dom label-edge="inside" config="[[ formDom ]]" />
      </oj-bind-if>
      <oj-bind-if test="[[showHelp()]]">
        <oj-table
                id='help-table'
                aria-label='Help Table'
                data='[[helpDataProvider]]'
                scroll-policy='loadMoreOnScroll'
                scroll-policy-options='{"fetchSize": 10}'
                columns-default='{"sortable": "disabled", "resizable":"disabled"}'
                columns='[{
            "headerText": "Name",
            "headerStyle": "font-weight:bold;text-align:left;min-width: 8em; width: 8em;",
            "style": "white-space:normal;padding:5px;min-width: 8em; width: 8em;",
            "name": "Name",
            "field": "Name"
          },
          {
            "headerText": "Description",
            "headerStyle": "font-weight:bold;text-align:left;",
            "style": "white-space:normal;padding:5px;",
            "name": "Description",
            "field": "Description",
            "template": "domTemplate"
           }]'
        >
          <template slot="domTemplate" data-oj-as="cell">
            <oj-bind-dom config="[[cell.data]]" />
          </template>
        </oj-table>
        <oj-bind-dom config="[[helpFooterDom]]" />
      </oj-bind-if>
    </div>
  </div>
</div>
